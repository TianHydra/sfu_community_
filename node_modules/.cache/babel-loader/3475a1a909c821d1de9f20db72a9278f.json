{"ast":null,"code":"var _jsxFileName = \"/Users/aryanarora/Desktop/Courses/CMPT 474/Assignments/PR#1/sfu_community/src/Components/MyPost.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport \"./MyPost.css\";\nimport axios from \"axios\";\nimport config from \"../config.json\";\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction MyPost(props) {\n  _s();\n\n  const [postsData, setPostsData] = useState([]);\n  const [newPostTitle, setNewPostTitle] = useState(null);\n  const [newPostBody, setNewPostBody] = useState(null); //Modal state\n\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  async function fetchPosts() {\n    try {\n      const res = await axios.get(`${config.api.invokeURL}/posts`);\n      let myPosts = res.data.map(post => {\n        console.log(post.postCreatorUsername); //return post ? post.postCreatorUsername === props.authProps.user.username : null;\n      });\n      setPostsData(myPosts);\n      console.log(res.data);\n    } catch (err) {\n      console.log(\"error fetching posts: \", err);\n    }\n  }\n\n  async function postPosts() {\n    try {\n      let date = new Date();\n      let id = date.valueOf().toString();\n      const res = await axios.post(`${config.api.invokeURL}/posts/${id}`, {\n        \"id\": id,\n        \"postCreatorUsername\": props.authProps.user.username,\n        \"postTitle\": newPostTitle,\n        \"postBody\": newPostBody,\n        \"postDateAndTimeCreated\": `${date.getFullYear()}-${date.getMonth()}-${date.getDate()} @ ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`\n      });\n      console.log(res);\n    } catch (err) {\n      console.log(\"error fetching posts: \", err);\n    }\n  }\n\n  useEffect(() => {\n    fetchPosts().then(r => console.log(\"fetched\"));\n  }, []);\n\n  function inputChangeHandler(event) {\n    switch (event.target.name) {\n      case \"title\":\n        setNewPostTitle(event.target.value);\n        break;\n\n      case \"body\":\n        setNewPostBody(event.target.value);\n        break;\n\n      default:\n        console.log(\"input handler waiting for input\");\n    }\n  }\n\n  function handleSubmit() {\n    postPosts().then(r => fetchPosts());\n    handleClose();\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post-container\",\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      variant: \"primary\",\n      className: \"add-new-post-btn\",\n      onClick: handleShow,\n      children: \"Add new Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      onHide: handleClose,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Add new Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"postTitle\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              placeholder: \"Enter Title\",\n              name: \"title\",\n              onChange: inputChangeHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"postBody\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Body\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              placeholder: \"Description\",\n              name: \"body\",\n              onChange: inputChangeHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: handleClose,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleSubmit,\n          children: \"Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), postsData.map(post => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-container\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          style: {\n            width: '40rem',\n            height: '15rem'\n          },\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n              children: post.postTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Card.Subtitle, {\n              className: \"mb-2 text-muted\",\n              children: [\"by \", post.postCreatorUsername]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n              children: post.postBody\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"date-created\",\n              children: post.postDateAndTimeCreated\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MyPost, \"dkXADHVS5KveDRkJiwtz5mpUQQU=\");\n\n_c = MyPost;\nexport default MyPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyPost\");","map":{"version":3,"sources":["/Users/aryanarora/Desktop/Courses/CMPT 474/Assignments/PR#1/sfu_community/src/Components/MyPost.js"],"names":["React","useEffect","useState","axios","config","Button","Modal","Form","Card","MyPost","props","postsData","setPostsData","newPostTitle","setNewPostTitle","newPostBody","setNewPostBody","show","setShow","handleClose","handleShow","fetchPosts","res","get","api","invokeURL","myPosts","data","map","post","console","log","postCreatorUsername","err","postPosts","date","Date","id","valueOf","toString","authProps","user","username","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","then","r","inputChangeHandler","event","target","name","value","handleSubmit","width","height","postTitle","postBody","postDateAndTimeCreated"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport \"./MyPost.css\"\nimport axios from \"axios\";\nimport config from \"../config.json\";\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\n\nfunction MyPost(props) {\n\n    const [postsData, setPostsData] = useState([]);\n    const [newPostTitle, setNewPostTitle] = useState(null);\n    const [newPostBody, setNewPostBody] = useState(null);\n\n    //Modal state\n    const [show, setShow] = useState(false);\n    const handleClose = () => setShow(false);\n    const handleShow = () => setShow(true);\n\n    async function fetchPosts() {\n        try {\n            const res = await axios.get(`${config.api.invokeURL}/posts`);\n            let myPosts = res.data.map(post => {\n                console.log(post.postCreatorUsername)\n                //return post ? post.postCreatorUsername === props.authProps.user.username : null;\n            })\n            setPostsData(myPosts);\n            console.log(res.data)\n        }\n        catch (err) {\n            console.log(\"error fetching posts: \", err)\n        }\n    }\n\n    async function postPosts() {\n        try {\n            let date = new Date();\n            let id = date.valueOf().toString();\n            const res = await axios.post(`${config.api.invokeURL}/posts/${id}`, {\n                \"id\": id,\n                \"postCreatorUsername\": props.authProps.user.username,\n                \"postTitle\": newPostTitle,\n                \"postBody\": newPostBody,\n                \"postDateAndTimeCreated\": `${date.getFullYear()}-${date.getMonth()}-${date.getDate()} @ ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`\n            });\n            console.log(res)\n        }\n        catch (err) {\n            console.log(\"error fetching posts: \", err)\n        }\n    }\n\n    useEffect(() => {\n        fetchPosts().then(r => console.log(\"fetched\"));\n    }, [])\n\n    function inputChangeHandler(event) {\n        switch (event.target.name) {\n            case \"title\":\n                setNewPostTitle(event.target.value);\n                break;\n            case \"body\":\n                setNewPostBody(event.target.value);\n                break;\n            default:\n                console.log(\"input handler waiting for input\")\n        }\n    }\n\n    function handleSubmit() {\n        postPosts().then(r => fetchPosts());\n        handleClose();\n    }\n\n    return (\n        <div className='post-container'>\n            <Button variant=\"primary\" className=\"add-new-post-btn\" onClick={handleShow}>\n                Add new Post\n            </Button>\n\n            <Modal show={show} onHide={handleClose}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Add new Post</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <Form>\n                        <Form.Group controlId=\"postTitle\">\n                            <Form.Label>Title</Form.Label>\n                            <Form.Control type=\"text\" placeholder=\"Enter Title\" name=\"title\" onChange={inputChangeHandler}/>\n                        </Form.Group>\n\n                        <Form.Group controlId=\"postBody\">\n                            <Form.Label>Body</Form.Label>\n                            <Form.Control type=\"text\" placeholder=\"Description\" name=\"body\" onChange={inputChangeHandler}/>\n                        </Form.Group>\n                    </Form>\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={handleClose}>\n                        Close\n                    </Button>\n                    <Button variant=\"primary\" onClick={handleSubmit}>\n                        Add\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n\n\n\n            {postsData.map(post => {\n                return (\n                    <div className=\"post-container\">\n                        <Card style={{ width: '40rem', height: '15rem' }}>\n                            <Card.Body>\n                                <Card.Title>{post.postTitle}</Card.Title>\n                                <Card.Subtitle className=\"mb-2 text-muted\">by {post.postCreatorUsername}</Card.Subtitle>\n                                <Card.Text>\n                                    {post.postBody}\n                                </Card.Text>\n                                <div className=\"date-created\">\n                                    {post.postDateAndTimeCreated}\n                                </div>\n                            </Card.Body>\n                        </Card>\n                    </div>\n                )\n            })}\n        </div>\n    )\n}\n\nexport default MyPost;"]},"metadata":{},"sourceType":"module"}